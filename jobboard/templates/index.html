{% extends 'base.html' %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è ‚Äî JobBoard{% endblock %}
{% block content %}
<div class="row align-items-center mb-4">
  <div class="col-lg-7">
    <h1 class="display-5 fw-bold text-gradient">–î–æ—Å–∫–∞ –ø–æ–¥—Ä–∞–±–æ—Ç–∫–∏</h1>
    <p class="lead text-muted">–ù–∞–π–¥–∏—Ç–µ –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –±—ã—Å—Ç—Ä–æ ‚Äî –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –≤–∞–∫–∞–Ω—Å–∏—é –∏–ª–∏ –æ—Ç–∫–ª–∏–∫–Ω–∏—Ç–µ—Å—å.</p>
    <div class="mt-3">
      {% if user and user['is_employer'] %}
        <a href="{{ url_for('add_job') }}" class="btn btn-success btn-lg me-2"><i class="bi bi-plus me-1"></i> –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é</a>
      {% else %}
        <a href="{{ url_for('register') }}" class="btn btn-success btn-lg me-2"><i class="bi bi-person-plus me-1"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
      {% endif %}
      <a href="#jobs" class="btn btn-primary btn-lg"><i class="bi bi-search me-1"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏</a>
    </div>
  </div>
  <div class="col-lg-5 text-center d-none d-lg-block">
    <img src="{{ url_for('static', filename='avatar-default.svg') }}" alt="hero" class="img-fluid" style="max-width:320px;">
  </div>
</div>

<div class="row mb-4 justify-content-center">
  <div class="col-lg-8">
    <form class="input-group shadow rounded overflow-hidden" method="get" autocomplete="off">
      <input name="q" value="{{ search }}" type="search" class="form-control py-2" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –≤–∞–∫–∞–Ω—Å–∏—è–º...">
      <button class="btn btn-primary px-4" type="submit"><i class="bi bi-search"></i> –ù–∞–π—Ç–∏</button>
      {% if user and user['is_employer'] %}
      <a href="{{ url_for('add_job') }}" class="btn btn-success ms-2 px-4 d-none d-md-inline-block"><i class="bi bi-plus"></i> –ù–æ–≤–∞—è</a>
      {% endif %}
    </form>
  </div>
</div>

{% if jobs %}
<div class="row g-4">
  {% for job in jobs %}
  <div class="col-md-6 col-lg-4">
    <div class="card shadow-sm bg-glass h-100 animate__animated animate__fadeInUp">
      <div class="card-body d-flex flex-column">
        <div class="d-flex align-items-center mb-2">
          <div class="code-circle me-2"><i class="bi bi-person-workspace"></i></div>
          <div>
            <h5 class="mb-0 fw-bold text-gradient">{{ job['title'] }}</h5>
            <small class="text-muted">{{ job['author'] or '–ê–Ω–æ–Ω–∏–º' }}</small>
          </div>
        </div>
        <p class="card-text text-secondary mb-3 small">{{ job['description'][:140] ~ ('...' if job['description']|length > 140 else '') }}</p>
        {% if job['tags'] %}
          <div class="mb-2">
            {% for t in job['tags'].split(',') %}
              <span class="badge-job">{{ t.strip() }}</span>
            {% endfor %}
          </div>
        {% endif %}
        <div class="mt-auto d-flex justify-content-between align-items-center">
          <div>
            {% if job['salary'] %}<span class="salary-pill me-2">{{ job['salary'] }}</span>{% endif %}
            <a href="{{ url_for('job_detail', job_id=job['id']) }}" class="btn btn-outline-primary btn-sm">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
          </div>
          <div class="text-muted small">{{ job['created'] }}</div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
  <div class="alert alert-secondary text-center mt-5 bg-glass">–ü–æ–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</div>
{% endif %}
{% endblock %}